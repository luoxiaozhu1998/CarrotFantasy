using System.Collections.Generic;using Manager.MonoManager;using UnityEngine;namespace Factory{    public class BaseFactory : IBaseFactory    {        /// <summary>        /// UI/UIPanel/Game 是资源        /// </summary>        private readonly Dictionary<string, GameObject> m_FactoryDict = new();        /// <summary>        /// 对象池字典        /// </summary>        private readonly Dictionary<string, Stack<GameObject>> m_ObjectPoolDict = new();        protected string LoadPath;        protected BaseFactory()        {            LoadPath = "Prefabs/";        }        /// <summary>        /// 取实例        /// </summary>        /// <param name="itemName">名字</param>        /// <returns></returns>        public GameObject GetItem(string itemName)        {            GameObject itemGo;            if (m_ObjectPoolDict.ContainsKey(itemName))            {                if (m_ObjectPoolDict[itemName].Count==0)                {                    var go = GetResource(itemName);                    itemGo = GameManager.CreateItem(go);                }                else                {                    itemGo = m_ObjectPoolDict[itemName].Pop();                    itemGo.SetActive(true);                }            }            else            {                m_ObjectPoolDict.Add(itemName, new Stack<GameObject>());                var go = GetResource(itemName);                itemGo = GameManager.CreateItem(go);            }            if (itemGo == null)            {                Debug.Log(itemName + "获取失败");            }            return itemGo;        }        /// <summary>        /// 放入池子的方法        /// </summary>        /// <param name="itemName">物体名字</param>        /// <param name="item">物体对象</param>        public void PushItem(string itemName, GameObject item)        {            item.SetActive(false);            item.transform.SetParent(GameManager.instance.transform);            if (m_ObjectPoolDict.ContainsKey(itemName))            {                m_ObjectPoolDict[itemName].Push(item);            }            else            {                Debug.Log("当前字典没有" + itemName + "对象池");            }        }        private GameObject GetResource(string itemName)        {            GameObject itemGo;            var itemLoadPath = LoadPath + itemName;            if (m_FactoryDict.ContainsKey(itemName))            {                itemGo = m_FactoryDict[itemName];            }            else            {                itemGo = Resources.Load<GameObject>(itemLoadPath);                m_FactoryDict.Add(itemName, itemGo);            }            if (itemGo != null) return itemGo;            Debug.Log(itemName + "的资源获取失败");            Debug.Log("失败路径" + itemLoadPath);            return itemGo;        }    }}